@let cart = $cart();
@if (cart.events.length > 0) {
  @for (event of cart.events; track event.eventId) {
    <div class="pb-2 mb-2">
      <div class="flex gap-4 items-center">
        <h3 class="font-semibold">{{ event.eventTitle }}</h3>
        <button
          (click)="removeEvent(event.eventId)"
          class="hover:text-gray-600"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 fill-current"
            viewBox="0 0 448 512"
          >
            <path
              d="M135.2 17.7C138.5 7.4 148.2 0 159 0h130c10.8 0 20.5 7.4 23.8 17.7L319 32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64s14.3-32 32-32H129L135.2 17.7zM32 160c0-17.7 14.3-32 32-32h320c17.7 0 32 14.3 32 32v272c0 48.6-39.4 88-88 88H120c-48.6 0-88-39.4-88-88V160zm120 40c-13.3 0-24 10.7-24 24v176c0 13.3 10.7 24 24 24s24-10.7 24-24V224c0-13.3-10.7-24-24-24zm104 24v176c0 13.3 10.7 24 24 24s24-10.7 24-24V224c0-13.3-10.7-24-24-24s-24 10.7-24 24zm-128-24c-13.3 0-24 10.7-24 24v176c0 13.3 10.7 24 24 24s24-10.7 24-24V224c0-13.3-10.7-24-24-24z"
            />
          </svg>
        </button>
      </div>

      @for (session of event.sessions; track session.date) {
        <div class="flex justify-between items-center mt-2">
          <span class="text-sm text-gray-700">
            {{ session.date.toLocaleDateString() }}
          </span>
          <div class="flex items-center gap-8">
            <span class="font-semibold">x{{ session.selectedSeats }}</span>
            <button
              (click)="removeSession(event.eventId, session.date)"
              class="hover:text-gray-600"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-5 h-5 fill-current"
                viewBox="0 0 448 512"
              >
                <path
                  d="M135.2 17.7C138.5 7.4 148.2 0 159 0h130c10.8 0 20.5 7.4 23.8 17.7L319 32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64s14.3-32 32-32H129L135.2 17.7zM32 160c0-17.7 14.3-32 32-32h320c17.7 0 32 14.3 32 32v272c0 48.6-39.4 88-88 88H120c-48.6 0-88-39.4-88-88V160zm120 40c-13.3 0-24 10.7-24 24v176c0 13.3 10.7 24 24 24s24-10.7 24-24V224c0-13.3-10.7-24-24-24zm104 24v176c0 13.3 10.7 24 24 24s24-10.7 24-24V224c0-13.3-10.7-24-24-24s-24 10.7-24 24zm-128-24c-13.3 0-24 10.7-24 24v176c0 13.3 10.7 24 24 24s24-10.7 24-24V224c0-13.3-10.7-24-24-24z"
                />
              </svg>
            </button>
          </div>
        </div>
      }
    </div>
  }
} @else {
  <p class="text-gray-500 size-full text-center">Your cart is empty.</p>
}
